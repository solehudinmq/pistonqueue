cd /etc/systemd/system/
sudo touch pistonqueue_consumer.service
which bundler # bundler-installation-location
which ruby # ruby-installation-location

sudo systemctl stop pistonqueue_consumer.service

sudo nano pistonqueue_consumer.service
# Fill in pistonqueue_consumer.service as below :
[Unit]
Description=Ruby service to consume and process data from redis queue
After=network.target redis-server.service

[Service]
User=blackedet # your username on the server/computer
WorkingDirectory=/home/blackedet/MyWorks/pistonqueue/example # location of your project folder
Environment="REDIS_URL=redis://localhost:6379" # env for redis url
ExecStartPre=/home/blackedet/.local/share/mise/installs/ruby/3.4.5/bin/bundle install # <bundler-installation-location> install
ExecStart=/home/blackedet/.local/share/mise/installs/ruby/3.4.5/bin/bundle exec /home/blackedet/.local/share/mise/installs/ruby/3.4.5/bin/ruby consumer.rb # <bundler-installation-location> exec <ruby-installation-location> consumer.rb
Restart=always
RestartSec=3

[Install]
WantedBy=multi-user.target
# end of file pistonqueue_consumer.service

sudo systemctl daemon-reload
sudo systemctl start pistonqueue_consumer.service
sudo systemctl enable pistonqueue_consumer.service