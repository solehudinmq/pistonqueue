How to make 'consumer.rb' run in systemd :
1. cd /etc/systemd/system/
2. sudo touch pistonqueue_consumer.service
3. which bundler # bundler-installation-location
4. which ruby # ruby-installation-location
5. sudo nano pistonqueue_consumer.service
# Fill in pistonqueue_consumer.service as below :
[Unit]
Description=Hybrid Ruby Worker Service
After=network.target redis-server.service

[Service]
User=blackedet # your username on the server/computer
WorkingDirectory=/home/blackedet/MyWorks/test # location of your project folder
Environment="REDIS_URL=redis://localhost:6379" # env for redis url
ExecStartPre=/home/blackedet/.local/share/mise/installs/ruby/3.4.5/bin/bundle install # <bundler-installation-location> install
ExecStart=/home/blackedet/.local/share/mise/installs/ruby/3.4.5/bin/bundle exec /home/blackedet/.local/share/mise/installs/ruby/3.4.5/bin/ruby consumer.rb # <bundler-installation-location> <ruby-installation-location> consumer.rb
Restart=always
RestartSec=3

[Install]
WantedBy=multi-user.target
# end of file pistonqueue_consumer.service
6. ctrl + o 
7. sudo systemctl daemon-reload
8. sudo systemctl start pistonqueue_consumer.service
9. sudo systemctl enable pistonqueue_consumer.service

How to see your service status in systemd :
1. sudo systemctl status pistonqueue_consumer.service

How to view your service logs in systemd :
1. sudo journalctl -u pistonqueue_consumer.service -f

How to restart the service :
1. sudo systemctl daemon-reload
2. sudo systemctl restart pistonqueue_consumer.service
